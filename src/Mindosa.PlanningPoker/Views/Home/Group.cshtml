@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<string>
@{
    Layout = "_Layout.cshtml";
}

<div id="link-panel">
    <a href="#" data-bind="click: onClearClicked" title="Clear Selections" id="btn-clear"><i class="fa fa-refresh"></i></a>
    <a href="#" data-bind="click: onSettingsClicked" title="Settings" id="lnk-settings"><i class="fa fa-cog"></i></a>
</div>
<div class="clear-fix"></div>
<div>
    <strong>Group Name:</strong> @Model
</div>


<div id="settings-panel" data-bind="visible: showSettingsPanel, duration: 300">
    <div class="setting">
        <label for="user-name" class="field-label">User Name:</label>
        <input id="user-name" type="text" data-bind="value: myUserName" />
        <p>
            This is the name that will be shown to other users.
        </p>
    </div>
    <div class="setting">
        <label for="group-cards" class="field-label">Cards:</label>
        <input id="group-cards" type="text" data-bind="value: cardList" />
        <p>
            The cards are a coma delimited list of values. You may enter as many as you would like.
        </p>
    </div>
    <div class="setting">
        <label for="observer-only" class="field-label">Observer Only:</label>
        <div class="checkbox">
            <input id="observer-only" type="checkbox" value="true" data-bind="checked: observerOnly" />
            <label for="observer-only"></label>
        </div>
        <p>
            If you are an observer, you don't get to vote but you will get to see the results.
        </p>
    </div>
    <div class="actions">
        <button id="btn-updateSettings" data-bind="click: onUpdateSettingsClicked" title="Update Settings">
            <i class="fa fa-upload"></i>Update Settings
        </button>
    </div>
</div>

<ul id="user-list" data-bind="foreach: users" class="card-list inner-panel">
    <!-- ko ifnot: observerOnly -->
    <li>
        <span class="user-name" data-bind="html: name"></span>
        <div class="user-card card" data-bind="html: $parent.getCardValue(card), css: { selected: isSelected }"></div>
    </li>
    <!-- /ko -->
</ul>
<!-- ko ifnot: observerOnly -->
<ul id="card-list" data-bind="foreach: cards" class="card-list">
    <li class="card" data-bind="html: $data, css: { selected: $parent.isSelectedCard($data) }, click: $parent.onCardClicked"></li>
</ul>
<!-- /ko -->

@section scripts{
    <!--Reference the SignalR library. -->
    <script src="/Scripts/jquery.signalR-2.0.3.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <script src="/Scripts/knockout-3.1.0.js"></script>
    <script src="/Scripts/group.js"></script>

    <script type="text/javascript">

        $(function() {
            group.init('@Model');
        });
    </script>

}